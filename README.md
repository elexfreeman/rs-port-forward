# Описание проекта

## rs-port-forward

`rs-port-forward` — это асинхронное приложение на языке Rust, которое обеспечивает проброс (форвардинг) портов, перенаправляя трафик с локального порта на удалённый сервер и порт. Конфигурация приложения задается через JSON-файл.

## Функциональность

- Проброс TCP-соединений с локального порта на указанный удалённый хост и порт.
- Чтение конфигурации из файла, который может быть передан через аргументы командной строки или загружен из стандартного пути.
- Асинхронная обработка нескольких соединений с использованием библиотеки `Tokio`.
- Возможность задания нескольких правил проброса портов в конфигурационном файле.

## Требования

Для работы программы необходимы следующие библиотеки и зависимости:

- [Tokio](https://tokio.rs/) — асинхронный runtime для работы с сетевыми соединениями.
- [serde](https://serde.rs/) и [serde_json](https://docs.rs/serde_json) — для сериализации и десериализации данных в JSON.
- [chrono](https://docs.rs/chrono) — для работы с датой и временем в логах.

## Использование

### Конфигурация

Программа читает конфигурационный файл в формате JSON. Пример конфигурации:

```json
{
    "connect_list": [
        {
            "name": "Connection1",
            "local_port": 8080,
            "remote_port": 80,
            "remote_address": "192.168.1.100"
        },
        {
            "name": "Connection2",
            "local_port": 8081,
            "remote_port": 443,
            "remote_address": "example.com"
        }
    ]
}
```

Каждое соединение в конфигурации имеет следующие поля:
- `name`: Название соединения (для удобства).
- `local_port`: Локальный порт, с которого будет перенаправляться трафик.
- `remote_port`: Удалённый порт, на который будет отправляться трафик.
- `remote_address`: Удалённый адрес сервера (IP или доменное имя).

### Запуск

Для запуска программы можно передать путь к конфигурационному файлу через аргумент командной строки `--config`:

```bash
cargo run -- --config /path/to/config.json
```

Если путь к файлу не указан, по умолчанию программа попытается загрузить конфигурацию из файла `rs-port-forward.config.json`. На системах Linux и macOS программа будет искать конфигурацию в `/etc/rs-port-forward.config.json`.

### Логи

Ошибки и информация о процессе проброса портов будут отображаться в консоли, включая дату и время возникновения ошибок.

## Пример использования

```bash
cargo run -- --config config.json
```

Программа загрузит конфигурацию из указанного файла, выведет список активных соединений, после чего начнет принимать входящие соединения и перенаправлять их на удаленные хосты.

## Лицензия

Этот проект распространяется по лицензии MIT.